name: Generate Metrics

on:
  schedule: [{cron: "0 10 * * *"}]
  workflow_dispatch:
  push: {branches: ["main"]}

jobs:
  github-metrics:
    runs-on: ubuntu-latest

    steps:
      - uses: lowlighter/metrics@latest
        with:
          # Common config
          user: scars97
          token: ${{ secrets.METRICS_TOKEN }}

          # Output file
          template: classic
          filename: isocalendar.svg
          config_output: svg

          # Output info
          base: ""
          base_indepth: true

          plugin_isocalendar: true
          plugin_isocalendar_duration: half-year
