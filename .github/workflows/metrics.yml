name: Generate Metrics

on:
  schedule: [{cron: "57 21 * * *"}]
  workflow_dispatch:
  push: {branches: ["main"]}

# 워크플로우가 작동하는 환경을 정의합니다.
jobs:
  github-metrics:
    runs-on: ubuntu-latest
    steps:
      # Metrics를 생성
      - name: Half-year calendar
        uses: lowlighter/metrics@latest
        with:
          # GitHub API 토큰을 사용합니다. 이 토큰은 GitHub secrets에 설정되어 있어야 합니다.
          token: ${{ secrets.METRICS_TOKEN }}
          base: header, activity, community, repositories, metadata
          config_timezone: Asia/Seoul
          plugin_isocalendar: yes
          filename: metrics.plugin.isocalendar.svg

      # 생성된 SVG 파일을 푸시
      #- name: Commit and Push changes without Contributions
      #  uses: stefanzweifel/git-auto-commit-action@v4
      #  with:
      #    commit_message: "Update metrics [skip ci] [no-contribution]"  # [skip ci]를 추가
      #    branch: main
